# Сайт для генерации анекдотов

***Проект был выполнен в рамках курса "Объектно-ориентированное программирование" на 2 курсе МАИ Елистратовой П.А. и Агеевой А.И.***

## Задачи, которые необходимо было реализовать:
- сбор датасета
- дообучение модели
- написать бэкенд сайта
- написать фронтенд сайта
- докер
- оформление репозитория

#### Разделение зон ответственности в команде

Многие задачи выполнялись совместно, так как в основном работали с новыми для нас технологиями. Но если разбивать:

* Елистратова (сбор датасета, обучение модели, бэкенд сайта, оформление репозитория)
* Агеева (обучение модели, фронтенд сайта, докер)

### Составление датасета
За основу был взят [датасет с Hugging Face](https://huggingface.co/datasets/artemsnegirev/dialogs_from_jokes). Но количество шуток было уменьшено, чтобы избежать ошибки *памяти cuda*.
Итоговый датасет с шутками находится в файле `jokes_dataset.txt` в папке [model_train](https://github.com/TIoJIuHa/generation-of-jokes/tree/develop-site/oop/model_train)

### Дообучение модели
В рамках проекта нужно было дообучить модель, основанную на [русскоязычной GPT-3](https://github.com/ai-forever/ru-gpts), которая может генерировать связанный текст на основе заданного отрывка. Дообучали *"sberbank-ai/rugpt3medium_based_on_gpt2"*, так как это оказалось оптимальным вариантом, чтобы обучение прошло без ошибок и качество генерируемого текста не сильно упало.
Процесс дообучения модели находится в файле `train_medium_model.ipynb` в папке [model_train](https://github.com/TIoJIuHa/generation-of-jokes/tree/develop-site/oop/model_train)

### Разработка сайта

Для разработки сайта был выбран веб-фреймворк Flask, мы посчитали этот вариант самым оптимальным для нашего небольшого проекта.
Все файлы хранятся в папке [oop](https://github.com/TIoJIuHa/generation-of-jokes/tree/develop-site/oop). Основной файл с кодом - `model_web_app.py`

### Написание докера

Сначала была изучена документация на официальном сайте docker, после скачено и запущено само приложение. Попытавшись написать простой dockerfile, я поняла, что почему-то не пробрасываются порты, и наш сайт просто недоступен на локальной сети. Изучив материалы и просмотрев пару ответов на stackowerflow, я поняла, что проблема в самом flask-приложении, и изменила его, чтобы можно было прослушивать все порты, указав явно заданный хост и порт. 

Далее я изучила такое понятие, как volume, и пришла к выводу, что не имея БД, смысл использовать полноценный том нет, а вместо этого при запуске image, следует примонтировать две папки: styles и templates, чтобы во время frontend доработки не приходилось заново собирать основной image. 

Таким образом, я собрала простой Dockerfile и залью его на свой докерхаб (если мне придёт письмо для смены пароля...). А так же слегка изменила основной питоновское приложение. Инструкция по запуску находиться в самом dockerfile.

### Результат:

Вот так выглядит наш сайт:
*скрин сайта *

Вот пример нескольких анекдотов, сгенерированных на нашем сайте:
*скрины сгенерированных анекдотов *
